# Feature List: Zest

**Project:** Zest — AI-powered UI Builder
**Date:** 2026-02-22
**Version:** 1.0
**Status:** Approved
**Source Documents:** `docs/prd.md` §6 (Scope), §8 (User Stories)

> This is the master list of all features for Zest MVP. Each feature maps to one or more user stories from the PRD. Per-feature documentation lives in `docs/features/[feature-slug]/`.

---

## Feature Registry

| # | Feature Slug | Feature Name | Priority | PRD Stories | Status |
|---|--------------|--------------|----------|-------------|--------|
| 1 | `prompt-generation` | Prompt-to-UI Generation | P0 | US-01, US-02, US-03 | Not Started |
| 2 | `visual-editor` | Visual Editor | P0 | US-04, US-05, US-06, US-07, US-08, US-09 | Not Started |
| 3 | `chat-refinement` | Chat Refinement | P0 | US-10, US-11 | Not Started |
| 4 | `code-export` | Code Export | P0 | US-12, US-13, US-14 | Not Started |
| 5 | `authentication` | Authentication & User Accounts | P1 | US-15, US-16 | Not Started |
| 6 | `project-management` | Project Persistence & Dashboard | P1 | US-17, US-18 | Not Started |
| 7 | `freemium-limits` | Freemium Usage Limits & Upgrade | P1 | US-19, US-20 | Not Started |
| 8 | `responsive-preview` | Responsive Preview | P1 | *(implied by US-02)* | Not Started |

---

## Feature Summaries

---

### 1. Prompt-to-UI Generation (`prompt-generation`) — P0

**What it does:** The core product capability. A user enters a natural language description of a web interface, and the system produces valid HTML/CSS (or Tailwind-class HTML) within 30 seconds.

**User Stories:** US-01, US-02, US-03

**Scope:**
- `PromptBar` component on the homepage/editor
- `POST /api/v1/generate` endpoint — proxies to Go AI Service
- Go AI Service: prompt sanitization, content moderation, provider routing, fallback chain (GLM → Gemini → GitHub Copilot), response normalization
- `GenerationLoader` theatrical loading state
- Generation result display in canvas (iframe sandbox)
- "Regenerate" button (US-03)
- Caching: Redis 1-hour cache on `prompt_hash:output_format`
- Rate limiting: anonymous 3/day; free_user 20/month

**Key Business Rules:** BR-001 to BR-011

**Per-feature docs:** `docs/features/prompt-generation/`

---

### 2. Visual Editor (`visual-editor`) — P0

**What it does:** A WYSIWYG canvas where users can click, drag, resize, style, and delete elements in the generated UI — all without touching code.

**User Stories:** US-04, US-05, US-06, US-07, US-08, US-09

**Scope:**
- Three-panel editor layout (sidebar / canvas / properties)
- Element selection with visible handles
- Properties panel (color, font, spacing, sizing)
- Inline text editing (double-click)
- Drag-to-reposition (`@dnd-kit`)
- Resize handles with dimension constraints
- Element deletion
- Undo/redo stack (min 50 actions — BR-018)
- Auto-save: localStorage every 30s anonymous (BR-019); server every 60s authenticated (BR-020)
- Layers panel (element tree)

**Key Business Rules:** BR-018, BR-019, BR-020

**Per-feature docs:** `docs/features/visual-editor/`

---

### 3. Chat Refinement (`chat-refinement`) — P0

**What it does:** A chat panel inside the editor where users describe changes in natural language. The AI applies targeted modifications to the specific element or section mentioned — without regenerating the entire UI.

**User Stories:** US-10, US-11

**Scope:**
- Chat panel UI in editor
- `POST /api/v1/generate` with refinement context (`previous_generation_id`, `refinement_target`)
- Go AI Service: scoped prompting (BR-021) — only modify targeted element/section
- Generation chain: `parent_generation_id` linkage
- Highlight changed elements on apply (US-11)
- Rate limits same as generation (BR-001, BR-002)

**Key Business Rules:** BR-021, BR-004, BR-005

**Per-feature docs:** `docs/features/chat-refinement/`

---

### 4. Code Export (`code-export`) — P0

**What it does:** One-click export of the current UI as a downloadable ZIP file containing clean, human-readable HTML/CSS or Tailwind CSS.

**User Stories:** US-12, US-13, US-14

**Scope:**
- Export modal (format selection: HTML/CSS vs Tailwind)
- `POST /api/v1/exports` endpoint
- ZIP generation: `index.html` + `styles.css` (HTML/CSS) OR `index.html` (Tailwind)
- Tailwind export restriction: authenticated users only (anonymous → blocked; BR-Permission Matrix)
- Anonymous watermark: `<!-- Generated by Zest -->` comment (removed for auth users)
- Code preview panel with syntax highlighting (US-14)
- `<meta charset>` and `<meta viewport>` injection (BR-012)
- Human-readable output, not minified (BR-013)
- Export record persisted in `Export` table

**Key Business Rules:** BR-012, BR-013; Permission Matrix §2.2

**Per-feature docs:** `docs/features/code-export/`

---

### 5. Authentication & User Accounts (`authentication`) — P1

**What it does:** Clerk-powered sign-up and sign-in. Anonymous use is always available; authentication unlocks project saving, higher generation limits, and watermark-free exports.

**User Stories:** US-15, US-16

**Scope:**
- Anonymous generation — no login required (US-15)
- Sign-up / sign-in with email + OAuth (Google minimum) via Clerk
- Clerk webhook handler (`POST /api/v1/webhooks/clerk`) — creates/syncs User record
- User metadata sync: `plan`, `clerk_id`, `email`
- Session management via Clerk (no custom session store)
- Upgrade prompt shown to anonymous users who try to save/export Tailwind

**Key Business Rules:** BR-014; FSD §7.1

**Per-feature docs:** `docs/features/authentication/`

---

### 6. Project Persistence & Dashboard (`project-management`) — P1

**What it does:** Authenticated users can save, name, and revisit their UI projects from a personal dashboard. Projects show thumbnail previews and can be reopened for continued editing.

**User Stories:** US-17, US-18

**Scope:**
- `POST /api/v1/projects` — create project
- `GET /api/v1/projects` — list user's projects (cursor-paginated)
- `GET /api/v1/projects/{id}` — get single project
- `PUT /api/v1/projects/{id}` — update name/metadata
- `DELETE /api/v1/projects/{id}` — soft delete
- Project dashboard page: thumbnail grid, project cards, search (basic)
- Thumbnail auto-generation: canvas screenshot → `thumbnail_url`
- Auto-save: editor state → server every 60 seconds (BR-020)
- `latest_generation_id` pointer update on new generation

**Key Business Rules:** BR-019, BR-020; Permission Matrix §2.2

**Per-feature docs:** `docs/features/project-management/`

---

### 7. Freemium Usage Limits & Upgrade (`freemium-limits`) — P1

**What it does:** Enforces generation quotas per tier (anonymous: 3/day; free: 20/month; paid: unlimited), surfaces current usage to users, and presents upgrade prompts at the limit boundary.

**User Stories:** US-19, US-20

**Scope:**
- Usage display: remaining generations counter in editor header/account area (US-19)
- `GET /api/v1/users/me/usage` — returns current usage and limit
- Upgrade wall (`UpgradeWall` pattern): shown when limit reached (US-20)
- Upgrade modal: plan comparison, CTA to payment
- Monthly counter reset logic: `generation_reset_at` on User entity
- Redis counter for anonymous users (48-hour TTL — BR-017)
- PostgreSQL counter for authenticated users (BR-002)

**Key Business Rules:** BR-001, BR-002, BR-017

**Per-feature docs:** `docs/features/freemium-limits/`

---

### 8. Responsive Preview (`responsive-preview`) — P1

**What it does:** Allows users to preview the generated UI at different viewport sizes (mobile, tablet, desktop) directly within the editor canvas, without exporting.

**User Stories:** Implied by US-02 (preview quality) and PRD §6 Scope item "Responsive Preview"

**Scope:**
- Viewport size toggle in editor toolbar (mobile 375px / tablet 768px / desktop 1280px)
- Canvas resizes to simulate viewport; iframe adjusts accordingly
- No changes to the underlying HTML/CSS — preview only
- Responsive breakpoints align with design system tokens

**Per-feature docs:** `docs/features/responsive-preview/`

---

## Foundation Items (Not Features — Shared Infrastructure)

These items are required before or during feature development but are not user-facing features in their own right:

| Item | Description | Relevant Docs |
|------|-------------|---------------|
| Project scaffolding | Next.js 14 app setup, TypeScript, Tailwind, Prisma, Clerk init | `docs/tech-stack.md` |
| Database schema | Prisma schema matching Core ERD | `docs/erd/core-erd.md` |
| Go AI Service scaffold | Go service with `/generate`, `/refine`, `/moderate`, `/health` | `docs/fsd.md` §7.3 |
| API middleware | Clerk auth validation, rate limiting (Redis), input validation | `docs/api-standards.md` |
| Design system implementation | CSS variables, Tailwind config, shadcn/ui setup | `docs/design-system.md` |
| CI/CD | Docker Compose for local dev; manual deploy for MVP | `docs/tech-stack.md` |

---

## Document History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2026-02-22 | AI Assistant | Initial version |

---

*Each feature slug maps to a directory at `docs/features/[feature-slug]/`. That directory will contain feature-specific artifacts: `prd-addendum.md`, `fsd.md`, `erd.md` (if needed), `api-contract.md` (if needed), `wireframes.md`, `stories/`, and `design-system-addendum.md` (if needed).*
